openapi: 3.0.0
info:
  version: 1.0.0-oas3
  title: Sub Locations
  description: |

    This API will return a collection of Sub Locations from either CSP or MDG environment. Sub Locations were originally known as Stations in PRIMA Web; they are a level below location in a Service or Production environment.

    The base endpoint URL for this API in production is: `https://marko.aramark.net/v1`.

    For testing the API with the "Try" tool on this page or in your app, use either our testing server "qa-marko" or our development server "dev-marko".
security:
  - apiKey: []
paths:
  /sub_locations:
    get:
      summary: Return Sub Locations
      description: |
        
        This API will return a collection of Sub Locations from either CSP or MDG environment. They are a level below location in a service or production environment.

        ![This endpoint is in production](/themes/portal/images/statuspngs/statusprod.png)
      operationId: getSubLocations
      parameters:
        - $ref: '#/components/parameters/searchParam'
        - $ref: '#/components/parameters/siteIdParam'
        - $ref: '#/components/parameters/profitCenterParam'
        - $ref: '#/components/parameters/locationIdParam'
        - $ref: '#/components/parameters/subLocationIdParam'
        - $ref: '#/components/parameters/formatParam'
        - $ref: '#/components/parameters/pageParam'
        - $ref: '#/components/parameters/sizeParam'
        - $ref: '#/components/parameters/bypassCacheParam'
        - $ref: '#/components/parameters/smokeParam'
      tags:
        - Sub Locations
      responses:
        '200':
          description: List all Locations.
          content:
            '*/*':
              schema:
                type: object
                properties:
                  status:
                    type: string
                    description: ENUM 'Success' or 'Error'
                    default: Success
                  count:
                    type: string
                    description: Number of records returned in request
                  page:
                    type: string
                    description: Page number of result set
                    default: '1'
                  size:
                    type: string
                    description: Number of records returned with the result set
                    default: '50'
                  sub_locations:
                    type: array
                    items:
                      $ref: '#/components/schemas/sub_locations'
        '404':
          description: Requested resource does not exist.
        '405':
          description: HTTP Verb / Operation not supported
servers:
  - url: https://qa-marko.aramark.net/v1
    description: Testing server
  - url: https://dev-marko.aramark.net/v1
    description: Development server
components:
  parameters:
    searchParam:
      name: search
      in: query
      description: Search string to find Sites. Searches against Site Name.
      required: false
      schema:
        type: string
    siteIdParam:
      name: site_id
      in: query
      description: Unique ID of Site to return Sites.
      required: false
      schema:
        type: string
    profitCenterParam:
      name: profit_center
      in: query
      description: Unique ID of Profit Center to return Sub Locations.
      required: false
      schema:
        type: string
    locationIdParam:
      name: location_id
      in: query
      description: Unique ID of Location to return a Sub Locations.
      required: false
      schema:
        type: string
    subLocationIdParam:
      name: sub_location_id
      in: query
      description: Unique ID of Sub Location to return a Sub Locations.
      required: false
      schema:
        type: string
    formatParam:
      name: format
      in: query
      description: File format to return data
      required: false
      schema:
        type: string
        enum:
          - JSON
          - XLS
          - CSV
        default: JSON
    pageParam:
      in: query
      name: page
      escription: Page number of result set
      required: false
      schema:
        type: number
        default: 1
    sizeParam:
      name: size
      in: query
      description: Number of records to be returned in each page of result set
      schema:
        type: string
        default: 50
    bypassCacheParam:
      in: header
      name: bypass-cache
      description: This HTTP Header variable will bypass cache.
      schema:
        type: string
        enum:
          - 'true'
          - 'false'
        default: 'false'
    smokeParam:
      in: header
      name: smoke
      description: When set to 'true' this HTTP header variable will route the API call to the Integration testing environment. Only applicable in QA.
      schema:
        type: string
        default: 'false'
  schemas:
    sub_locations:
      type: object
      properties:
        sub_location_id:
          type: integer
          description: Unique code for a Sub Location, sourced by PRIMA or MDG
        sub_location_name:
          type: string
          description: Sub Location descriptive name
        sub_location:
          type: string
          description: Unique code for a Sub Location, sourced by MDG
        sub_location_enabled:
          type: string
          description: Indicator of whether Sub Location is enabled 'T/F'
        service_area_id:
          type: integer
          description: Unique code for a Service Area, sourced by PRIMA and kept for backwards compatibility, will be DEPRECATED
        service_area_name:
          type: integer
          description: Service Area descriptive name
        service_area_enabled:
          type: string
          description: Indicator of whether Service Area is enabled 'T/F'
        location_id:
          type: integer
          description: Unique code for a Location, sourced by BIC or MDG
        location:
          type: string
          description: Unique code for a Location, sourced by MDG
        location_name:
          type: string
          description: Location descriptive name
        profit_center:
          type: string
          description: Unique code for a Profit Center, sourced by BIC or MDG
        profit_center_name:
          type: string
          description: Profit Center name
        site_id:
          type: integer
          description: Site ID coming from source system CSP Will be DEPRECATED once MDG application is fully implemented
        site:
          type: string
          description: Global Unique identifier coming from MDG system
